# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```


## Архитектура приложения 
- MVC (Model-View-Controller) 


## Типы данных в проекте


### base/


#### Api.ts
- EnumApiMethods – перечисление HTTP-методов API.
Используется для указания типа запроса: POST, PUT, DELETE, GET.

- ErrorState – тип, описывающий состояние ошибки.
Содержит строку error, которая используется для хранения сообщения об ошибке.

#### View.ts
- IView<T, S = object> – интерфейс, описывающий компонент представления.
Содержит корневой элемент DOM (element), метод копирования компонента (copy) и метод рендера для отображения данных (render).

- IViewConstructor<T, S> – интерфейс конструктора для компонентов представления.
Описывает конструктор, который принимает корневой элемент и настройки и возвращает экземпляр IView.

- IClickableEvent<T> – тип, описывающий событие для кликабельных компонентов.
Содержит объект события мыши (event) и опциональный элемент (item).

- IClickable<T> – интерфейс для кликабельных компонентов.
Описывает обработчик кликов (onClick).

- IChangeableEvent<T> – тип, описывающий событие для изменяемых компонентов.
Содержит объект события (event) и опциональное значение (value).

- IChangeable<T> – интерфейс для изменяемых компонентов.
Описывает обработчик изменений (onChange).

- ISelectableEvent<T> – тип, описывающий событие для выбираемых компонентов.
Содержит объект события (event) и опциональное значение (value).

- ISelectable<T> – интерфейс для выбираемых компонентов.
Описывает обработчик выбора (onSelect).


### model/

#### AppState.ts
- IProductBasket - интерфейс описывает сокращённое представление продукта для корзины.
Используется для отображения основных данных товара: ID, название и цена.
- AppStateModals - перечисление всех модальных окон приложения. Содержит идентификаторы модальных окон, таких как корзина, адрес доставки, контакты и окно успешного оформления.
- AppStateChanges - перечисление возможных изменений состояния приложения.
Служит для указания, какие аспекты состояния изменились: продукты, модальные окна, сообщение и т. д.
- IPersistedState - интерфейс описывает состояние приложения, сохраняемое в localStorage.
Включает корзину (items) и контактные данные пользователя (contacts).
- AppState - интерфейс описывает модель данных приложения.
- AppStateSetting - интерфейс для настроек модели данных приложения.
- AppStateConstructor - интерфейс описывает конструктор модели данных приложения.

#### AppStateEmitter.ts
- ModalChange – тип, описывающий изменение состояния модальных окон.
Содержит информацию о предыдущем (previous) и текущем (current) состоянии модальных окон, что помогает корректно обрабатывать события их открытия и закрытия.

#### ProductAPI.ts
- IApiListResponse<Type> – интерфейс для ответа API с данными списка.
Содержит массив элементов (items) и общее количество элементов (total), что позволяет работать с пагинацией или просто получать всю информацию о товаре.

- TItemId – тип для идентификатора элемента.
Представляет собой строку, которая используется в качестве уникального идентификатора для элементов, таких как товары или заказы.

- IProduct – интерфейс для описания продукта.
Описывает товар с полями: _id (идентификатор), title (название), image (ссылка на изображение), category (категория), description (описание), и price (цена).

- TPaymentMethod – тип для метода оплаты.
Представляет два возможных значения для метода оплаты: online и upon receipt.

- IOrderMethod – интерфейс для описания способа оформления заказа.
Содержит поля для метода оплаты (payment) и адреса доставки (address).

- IContacts – интерфейс для контактных данных пользователя.
Расширяет IOrderMethod и включает поля для email и phone.

- IOrder – интерфейс для описания заказа.
Расширяет IContacts и добавляет поля для общей суммы заказа (total) и списка товаров в заказе (items).

- IOrderResult – интерфейс для результата обработки заказа.
Содержит информацию о заказанных товарах (items) и общей сумме заказа (total).

- IProductAPI – интерфейс для API работы с продуктами и заказами.
Содержит методы для получения списка продуктов (getProducts), получения одного продукта по ID (getProduct) и оформления заказа (orderProducts).


### view/common


#### Button.ts
- ButtonData – интерфейс для данных кнопки.
Описывает кнопку с полем label, которое хранит текст на кнопке.

- ButtonSettings<T> – интерфейс для настроек кнопки.
Расширяет интерфейс IClickable<T>, добавляя возможность для кнопки обрабатывать клики, и использует тип T для указания типа данных, которые могут быть переданы в обработчик клика.

#### Header.ts
- HeaderData – интерфейс для данных заголовка.
Описывает заголовок с полем title, которое хранит текст заголовка.

- HeaderSettings – интерфейс для настроек заголовка.
Содержит поле title, которое используется для задания текста заголовка в настройках компонента.

#### List.ts
- TElementsMap – тип, представляющий коллекцию элементов HTML.
Это объект, где ключом является строка, а значением — HTMLElement. Используется для хранения и работы с элементами на странице по их идентификаторам или другим ключам.

- IItemData – интерфейс для данных элемента списка.
Описывает элемент с полем id, которое представляет уникальный идентификатор этого элемента.

- IListData<T> – интерфейс для данных списка.
Содержит массив элементов типа T (items), которые будут отображаться в списке.

- IListSettings<T> – интерфейс для настроек компонента списка.
Описывает настройки для отображения элементов списка, включая:

- item — элемент списка, который является представлением данных типа T, реализующий интерфейс IView.
activeItemClass — класс для активного элемента списка.
itemClass — класс для обычных элементов списка.

#### Modal.ts
- ModalData<H, C> – интерфейс для данных модального окна.
Описывает модальное окно с опциональными полями для заголовка (header), обязательным содержимым (content), сообщением (message), состоянием активности (isActive) и ошибкой (isError), если таковая имеется.

- ModalSettings<H, C> – интерфейс для настроек модального окна.
Описывает настройки для модального окна, включая:
  - close — текст или кнопка для закрытия модального окна. 
  - header — текст заголовка.
  - content — текст или данные для содержимого окна.
  - footer — текст или элементы для нижней части окна.
  - message — текст сообщения, отображаемого в модальном окне.
  - headerView — представление заголовка, реализующее интерфейс IView<H>.
  - contentView — представление содержимого, реализующее интерфейс IView<C>.
  - actions — массив HTML-элементов для действий в модальном окне.
  - activeClass — класс для активного состояния модального окна.
  - messageErrorClass — класс для отображения ошибки в сообщении.
  - onOpen — необязательная функция, вызываемая при открытии модального окна.
  - onClose — необязательная функция, вызываемая при закрытии модального окна.

### view/partial


#### Card.ts
- CardData – интерфейс для данных карточки товара. Описывает товар с полями: _id (уникальный идентификатор), title (название товара), category (категория), price (цена), и imageUrl (ссылка на изображение товара).

- CardSettings – интерфейс для настроек карточки товара. Расширяет интерфейс IClickable<string>, что позволяет карточке обрабатывать клики, и включает поля для title, category, price, и imageUrl, которые задают визуальное содержимое карточки.

#### Order.ts
- OrderData – интерфейс для данных заказа. Описывает информацию, необходимую для оформления заказа, включая: address (адрес доставки), email (электронная почта), phone (номер телефона), и payment (метод оплаты).

- OrderSettings – интерфейс для настроек компонента оформления заказа. Расширяет интерфейс IChangeable<OrderData>, что позволяет отслеживать изменения в данных заказа (например, при изменении данных формы). Включает те же поля, что и OrderData, для задания и обработки информации о заказе: address, email, phone, и payment.

#### Page.ts
- PageData – интерфейс для данных страницы. Описывает данные, связанные с состоянием страницы, включая: counter (счётчик, возможно для отслеживания количества элементов или действий) и isLocked (флаг блокировки страницы).

- PageSettings – интерфейс для настроек компонента страницы. Расширяет интерфейс IClickable<never>, что указывает на отсутствие данных, передаваемых при клике. Включает поля:
  - wrapper — класс или идентификатор контейнера страницы.
  - counter — класс или идентификатор для отображения счётчика.
  - basket — класс или идентификатор для отображения корзины.
  - lockedClass — класс, который применяется, когда страница заблокирована.

#### Product.ts
- ProductData – интерфейс для данных продукта. Описывает информацию о товаре, включая: _id (уникальный идентификатор), title (название товара), category (категория товара), description (описание товара), price (цена товара), и imageUrl (ссылка на изображение товара).

- ProductSettings – интерфейс для настроек компонента продукта. Включает все поля из ProductData и добавляет:
  - compactClass — класс для компактного отображения товара.
  - tagsSeparator — разделитель для тегов товара.
  - isCompact — флаг, указывающий, должно ли отображение быть компактным.


### view/screen


#### Basket.ts
- BasketData – интерфейс для данных корзины.
Описывает информацию о корзине, включая:
  - products — массив товаров в корзине (каждый товар описан через ProductData).
  - header — данные заголовка корзины, используя HeaderData.
  - isActive — флаг, указывающий на активность корзины.
  - isDisabled — флаг, указывающий на блокировку корзины.
  - total — общая сумма корзины.

- BasketSettings – интерфейс для настроек компонента корзины. Включает методы для работы с корзиной:
  - onRemove — обработчик для удаления товара из корзины (по ID).
  - onClose — обработчик для закрытия корзины.
  - onNext — обработчик для перехода к следующему шагу (например, оформление заказа).

#### Main.ts
- ProductItem – интерфейс для элемента продукта.
Расширяет ProductData и добавляет дополнительные поля:
  - id — уникальный идентификатор продукта в контексте текущей страницы.
  - cover — изображение для предварительного просмотра продукта (например, для отображения на главной странице).

- MainData – интерфейс для данных главной страницы. Содержит:
  - counter — счётчик, который может отслеживать количество элементов или товаров.
  - items — массив продуктов (ProductData), отображаемых на главной странице.
  - selected — выбранный продукт (ProductItem), с дополнительной информацией.

- MainSettings – интерфейс для настроек главной страницы.
Включает обработчики событий:
  - onOpenBasket — функция для открытия корзины.
  - onOpenProduct — функция для открытия подробной страницы продукта по его id.

#### ModalScreen.ts
- ModalScreenSettings – интерфейс для настроек экрана модального окна.
Включает два обработчика событий:
  - onClose — функция, которая вызывается при закрытии модального окна.
  - onNext — функция, которая вызывается при переходе к следующему шагу или состоянию модального окна.

#### OrderForm.ts
- OrderFormData – интерфейс для данных формы заказа.
Описывает состояние формы, включая:
  - contacts — данные заказа, такие как адрес, email, телефон и метод оплаты (OrderData).
  - header — данные для заголовка формы (HeaderData).
  - isActive — флаг активности формы.
  - isDisabled — флаг, указывающий на блокировку формы.
  - message — сообщение, которое может быть отображено пользователю.
  - isError — флаг, указывающий, возникла ли ошибка при отправке формы.

- OrderFormSettings – интерфейс для настроек формы заказа.
Включает обработчики событий:
  - onChange — функция, вызываемая при изменении данных формы заказа.
  - onClose — функция, вызываемая при закрытии формы.
  - onNext — функция, вызываемая при переходе к следующему шагу (например, оформление или подтверждение заказа).

#### Success.ts

- SuccessData – интерфейс для данных экрана успеха. Описывает состояние экрана успешного завершения действия, включая:
  - title — заголовок, отображаемый на экране успеха.
  - description — описание или подробности о выполненной операции.
  - isActive — флаг активности экрана, указывающий, отображается ли он в данный момент.

- SuccessSettings – интерфейс для настроек экрана успеха. Включает:
  - onClose — функция, вызываемая при закрытии экрана успеха, например, после завершения операции или подтверждения успеха.


### types/


#### global.d.ts
- NodeJS.ProcessEnv – расширение глобального интерфейса для переменных окружения в Node.js. В данном случае добавляются две переменные окружения:

  - API_ORIGIN — строка, указывающая на источник API (например, URL для работы с сервером).
  - NODE_ENV — строковое значение, которое может быть одним из: 'development', 'production', или 'testing', указывающее на текущую среду выполнения приложения.

Это расширение позволяет IDE видеть эти переменные окружения и подсказать их использование в коде, обеспечивая правильность типов.
